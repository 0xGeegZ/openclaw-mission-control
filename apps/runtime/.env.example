# Runtime service environment variables
# Copy to .env in this directory (apps/runtime). Load manually or via your process manager.
# See README.md for how this service fits in OpenClaw Mission Control.

# --- Required ---
# Convex account ID this runtime serves (Id<"accounts"> from Convex).
ACCOUNT_ID=

# Convex deployment URL (same deployment as the web app).
CONVEX_URL=https://your-deployment.convex.cloud

# Service authentication token. Used to call Convex service-only actions.
# Must be scoped to the account; create via your Convex auth setup.
SERVICE_TOKEN=

# --- Optional (defaults in parentheses) ---
# Port for the health HTTP server (GET /health, GET /version).
HEALTH_PORT=3001

# Notification delivery poll interval in milliseconds.
DELIVERY_INTERVAL=5000

# Interval in ms for reporting runtime status to Convex (online/versions).
HEALTH_CHECK_INTERVAL=60000

# Interval in ms for syncing agent list from Convex (new agents picked up without restart; default 60000).
# AGENT_SYNC_INTERVAL=60000

# Runtime service version (defaults to package.json version).
# RUNTIME_VERSION=0.1.0

# OpenClaw version override if detection fails (default: detected via openclaw --version).
# OPENCLAW_VERSION=

# --- Logging & observability ---
# Log level: debug | info | warn | error (default: info).
# LOG_LEVEL=info

# Bind address for health HTTP server (default: 127.0.0.1 for local-only).
# Use 0.0.0.0 when running in Docker so healthcheck can reach the server.
# HEALTH_HOST=127.0.0.1

# --- Delivery backoff (on poll errors) ---
# Base delay in ms for exponential backoff (default: 5000).
# DELIVERY_BACKOFF_BASE_MS=5000
# Max delay in ms (default: 300000 = 5 min).
# DELIVERY_BACKOFF_MAX_MS=300000

# When upgrade/restart is requested: "exit" (default) exits so process manager restarts.
# UPGRADE_MODE=exit

# --- OpenClaw gateway (when using docker-compose with profile openclaw) ---
# Gateway base URL for OpenResponses (POST /v1/responses). Default: http://127.0.0.1:18789.
# In Docker with profile openclaw use: OPENCLAW_GATEWAY_URL=http://openclaw-gateway:18789
# OPENCLAW_GATEWAY_URL=http://127.0.0.1:18789
# Gateway auth token (Bearer). Optional for local gateway URLs; required for non-local URLs.
# Set empty to allow no-auth local gateway (will bind to localhost only).
# OPENCLAW_GATEWAY_TOKEN=
# Timeout for /v1/responses requests in ms (default 60000). Agent replies are written back to task threads.
# OPENCLAW_REQUEST_TIMEOUT_MS=60000
# Optional session store prune on OpenClaw startup:
# - Set to a number of days to remove stale session entries.
# - Set to 0 to clear all session entries (safe; they recreate on demand).
# OPENCLAW_SESSION_RETENTION_DAYS=
# Vercel AI Gateway API key (recommended). Mapped to AI_GATEWAY_API_KEY for OpenClaw.
# VERCEL_AI_GATEWAY_API_KEY=
# Optional direct key (overrides mapping if set).
# AI_GATEWAY_API_KEY=
#
# GitHub token for agent git push and PR creation (avoids `gh auth login` prompts).
# Required scopes: Contents read+write, Pull requests read+write (fine-grained) or repo (classic).
# Optional: GIT_AUTHOR_NAME, GIT_AUTHOR_EMAIL for commit identity.
# GH_TOKEN=
#
# Agents should run `git fetch origin` + `git pull --ff-only` at task start.

# --- Infrastructure (for tracking; reported in health and Convex) ---
# DigitalOcean droplet identifier.
# DROPLET_ID=
# DROPLET_IP=
# DROPLET_REGION=
